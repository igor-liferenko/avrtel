HINT: if things will not work properly, for debugging
try to put led on some digital output and turn it on where base_station_was_powered_on
is checked to be 1 during transition to on-line and turn it off when base_station_was_powered_on
is checeked to be 0 during transition to off-line

Read https://electronics.stackexchange.com/questions/43498/ to understand if it is necessary to enable pullup mode on PD2.
